<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>라오스 비엔티안(1박) - 방비엥(2박) C-Pack 빠른견적</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
  <style>
    html, body { margin: 0; padding: 0; background: #f8fbff; font-family: 'Noto Sans KR', Arial, sans-serif; color: #232323; }
    body { min-width: 0; }
    .container {
      max-width: 980px; min-width: 320px; width: 100%;
      margin: 36px auto 36px auto;
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 0 18px #0001;
      padding: 36px 32px 48px 32px;
      box-sizing: border-box;
    }
    h1 { font-size: 1.45rem; font-weight: bold; text-align: center; margin-bottom: 28px; color: #14508e; letter-spacing: -1px;}
    .form-grid { display: flex; gap: 40px; align-items: flex-start;}
    .form-col { flex: 1 1 0; min-width: 310px;}
    @media (max-width:900px){
      .container { max-width:97vw; padding: 10px 2vw 28px 2vw; }
      .form-grid { flex-direction: column; gap:18px;}
      .form-col { min-width: 0;}
    }
    .section, .date-section, .result-section, .contact-section { margin-bottom: 26px; }
    .section-label-row { display:flex; align-items:center; justify-content:space-between; margin-bottom:8px;}
    .option-list { margin-top: 6px;}
    .option-row { display: flex; align-items: center; justify-content: space-between; background:#f4f7fb; border:1px solid #d0deeb; border-radius:10px; padding: 13px 15px; margin-bottom: 9px; min-height:38px; font-size:1.11em; cursor:pointer; transition:background .18s, color .18s; font-weight:700; position:relative;}
    .option-row.selected { background: #296bb3; color: #fff; border-color: #14508e;}
    .option-title { font-size: 1.09em; flex:2;}
    .option-unit { flex:1.9; font-size: 1.05em; color:#17508e; text-align:right; transition:color .15s; font-weight:700;
      display: flex !important; align-items: center; justify-content: flex-end; gap: 10px;}
    .option-row.selected .option-unit { color:#fff;}
    .option-row.selected .option-unit span { color: #fff !important;}
    .option-minus-btn {
      background: #ececff;
      color: #2857a3;
      border: 1px solid #bdd2ea;
      font-size: 1em;
      font-weight: 700;
      border-radius: 13px;
      padding: 7px 17px 7px 17px;
      cursor: pointer;
      margin-left: 12px;
      box-shadow: 0 1px 5px #b9cbe833;
      display: inline-block;
      vertical-align: middle;
      white-space: nowrap;
      line-height: 1.2;
    }
    .option-minus-btn:active { background: #d9e8ff; }
    .toggle-group { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 7px;}
    .toggle-btn {
      background: #f4f7fb;
      border: 1.2px solid #c5d4ee;
      border-radius: 10px;
      padding: 11px 0 8px 0;
      font-size: 1.07em;
      flex: 1 1 0; min-width: 48px;
      text-align: center; cursor: pointer; margin-bottom: 6px;
      font-weight:700; transition:all 0.13s;
    }
    .toggle-btn.selected { background: #296bb3; color: #fff; border-color: #14508e;}
    .person-desc { color:#b04d0c; font-size:0.99em; margin-top:7px; margin-bottom:-14px; font-weight:700;}
    .room-single-btn {background:#fff7e0; color:#b26c18; border:1px solid #edd59c; font-size:1em; border-radius:7px; padding:7px 18px; margin-right:7px; cursor:pointer;}
    .room-single-btn:active {background:#ffeec4;}
    .init-btn { font-size:1em; background:#e5eefe; border:1px solid #bdd2ea; border-radius:8px; color:#347; padding:7px 15px; cursor:pointer; margin-left:0;}
    .init-btn:hover {background:#d1e8ff;}
    .result-section { margin: 20px 0 17px 0; padding: 13px 7px 8px 7px; background: #f4f6fa; border-radius: 12px; text-align: center; font-size: 1.07em; color: #14508e; font-weight: 600;}
    .result-title { font-size: 1.23em; font-weight: bold; color: #17508e; margin-bottom: 2px;}
    .result-desc { font-size: 0.97em; color: #989898; margin-bottom: 11px;}
    .result-big { font-size: 1.32em; font-weight: 700; color: #d02b2b; margin-left: 3px;}
    .contact-section { margin-bottom: 20px; background: #f9fafb; border-radius: 12px; padding: 12px 8px 7px 8px;}
    .contact-label { display: block; margin: 10px 0 5px 2px; color: #37629d; font-size: 1.09em; font-weight: 700;}
    .contact-input { width: 100%; padding: 8px 8px; border: 1px solid #bfd2e9; border-radius: 8px; font-size: 1.04em; margin-bottom: 3px; box-sizing: border-box; background: #f7fafc; font-family: 'Noto Sans KR', Arial, sans-serif; font-weight:700;}
    textarea.contact-input { resize: vertical;}
    .submit-btn { display: block; width: 100%; background: linear-gradient(90deg, #1466b6 88%, #25a6d1 100%); color: #fff; border: none; border-radius: 12px; padding: 15px 0; font-size: 1.12em; font-weight: 800; margin-top: 22px; cursor: pointer; transition: background 0.15s; letter-spacing: 0.5px; box-shadow: 0 2px 10px #4176a72c;}
    .submit-btn:active { background: #2a8ad1;}
    @media (max-width:700px){
      .container { padding: 7px 0.7vw 22px 0.7vw; }
      .form-grid { gap: 2vw;}
    }
  </style>
</head>
<body>
  <div class="container" id="cpack-quickform">
    <h1>라오스 비엔티안(1박) - 방비엥 (2박) C-Pack 빠른견적</h1>
    <div class="form-grid">
      <!-- 왼쪽 컬럼: 날짜, 인원, 가이드, 방비엥, 케어팩 -->
      <div class="form-col left">
        <div class="section">
          <label>여행일자</label>
          <input type="date" id="travelDate" class="date-input" required>
        </div>
        <div class="section">
          <label>여행인원 <span style="font-weight:400; color:#999; font-size:0.92em;">(2~8명, 예약금 인당 60,000원)</span></label>
          <div class="toggle-group" id="personToggleGroup"></div>
          <div class="person-desc">9명 이상 단체 할인 적용 가능, <b>개별 문의</b></div>
        </div>
        <div class="section">
          <label>가이드팩 <span style="font-weight:400; color:#999; font-size:0.92em;">(단일 선택)</span></label>
          <div class="toggle-group" id="guideToggleGroup">
            <div class="toggle-btn selected" data-guide="kr" data-price="220">한국인 가이드<br><span style="font-size:0.91em; color:#bbe6fa;">$220/팀</span></div>
            <div class="toggle-btn" data-guide="local" data-price="0">현지인 가이드<br><span style="font-size:0.91em; color:#55c;">추가요금 없음</span></div>
          </div>
        </div>
        <div class="section">
          <div class="section-label-row">
            <label>선택관광 (방비엥)</label>
            <button type="button" class="init-btn" onclick="resetVangvieng()">초기화</button>
          </div>
          <div class="option-list" id="vangviengList"></div>
        </div>
        <div class="section">
          <div class="section-label-row">
            <label>선택관광 (케어팩)</label>
            <button type="button" class="init-btn" onclick="resetCare()">초기화</button>
          </div>
          <div class="option-list" id="careList"></div>
        </div>
      </div>
      <div class="form-col right">
        <div class="section">
          <div class="section-label-row">
            <label>숙박팩</label>
            <div>
              <button type="button" class="room-single-btn" onclick="addSingleRoom()">싱글룸 추가</button>
              <button type="button" class="init-btn" onclick="resetSingleRoom()">초기화</button>
            </div>
          </div>
          <div class="option-list" id="roomList"></div>
        </div>
        <div class="result-section" id="resultSection">
          <div class="result-title">빠른 견적 금액</div>
          <div class="result-desc">(실제 견적과 상이할 수 있습니다.)</div>
          계약금 (한국에서 입금하실 금액): <span id="contractPrice" class="result-big"></span><br>
          잔금 (현지에서 달러 지불하실 금액): <span id="usdPrice" class="result-big"></span>
        </div>
        <div class="contact-section">
          <label class="contact-label" for="contactName">대표자 성함 <span style="color:#d02b2b;">*</span></label>
          <input type="text" class="contact-input" id="contactName" placeholder="대표자 이름을 입력하세요" required>
          <label class="contact-label" for="contactPhone">연락 가능한 번호 또는 카카오톡 ID <span style="color:#d02b2b;">*</span></label>
          <input type="text" class="contact-input" id="contactPhone" placeholder="휴대폰 번호 또는 카카오톡 ID" required>
          <label class="contact-label" for="contactNote">기타 요청 사항 (선택)</label>
          <textarea class="contact-input" id="contactNote" rows="2" placeholder="예 ) 예약 관련 특이사항, 식단, 선택관광에 없는 추가 희망 일정 등"></textarea>
        </div>
        <button class="submit-btn" onclick="submitEstimate()">빠른 견적 보내기</button>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script>
    (function(){ emailjs.init('luKxEKdyyvY4hjYfo'); })();
    const MAX_PERSON = 8;
    const extraUsdByPerson = {8:95,7:105,6:118,5:137,4:165,3:211,2:305};
    const vangviengOptions = [
      {name: "열기구", price: 100},
      {name: "페러모터", price: 85},
      {name: "버기카", price: 18},
      {name: "짚라인", price: 20},
      {name: "롱테일보트", price: 10},
      {name: "시크릿라군", price: 10}
    ];
    const careOptions = [
      {name: "베트남식 이발관 풀코스 (90분)", price: 30},
      {name: "라오 허벌 테라피", price: 40},
      {name: "라오 전통 마사지 (2시간)", price: 25},
      {name: "라오 전통 마사지 (1시간)", price: 13},
      {name: "라오 오일 마사지 (2시간)", price: 35},
      {name: "라오 오일 마사지 (1시간)", price: 20}
    ];
    const roomOptions = [
      {name: "5성급 3박", price: 255000},
      {name: "4성급 3박", price: 159000},
      {name: "제가 예약할게요", price: 0}
    ];
    const personToggleGroup = document.getElementById("personToggleGroup");
    let personCount = 2;
    for(let i=2; i<=MAX_PERSON; i++) {
      const btn = document.createElement("div");
      btn.className = "toggle-btn" + (i===2 ? " selected" : "");
      btn.innerText = i + "명";
      btn.setAttribute('data-person', i);
      btn.onclick = function() {
        document.querySelectorAll("#personToggleGroup .toggle-btn").forEach(b=>b.classList.remove("selected"));
        btn.classList.add("selected");
        personCount = i;
        vangviengPersons = vangviengPersons.map((v,idx)=>vangviengChecked[idx]?personCount:0);
        carePersons = carePersons.map((v,idx)=>careChecked[idx]?personCount:0);
        updateRoomList();
        renderVangviengList();
        renderCareList();
        updateTotal();
      }
      personToggleGroup.appendChild(btn);
    }
    let guideType = "kr";
    let guidePrice = 220;
    document.querySelectorAll("#guideToggleGroup .toggle-btn").forEach(btn=>{
      btn.onclick = function(){
        document.querySelectorAll("#guideToggleGroup .toggle-btn").forEach(b=>b.classList.remove("selected"));
        btn.classList.add("selected");
        guideType = btn.getAttribute('data-guide');
        guidePrice = Number(btn.getAttribute('data-price'));
        updateTotal();
      }
    });
    const vangviengList = document.getElementById("vangviengList");
    let vangviengChecked = Array(vangviengOptions.length).fill(false);
    let vangviengPersons = Array(vangviengOptions.length).fill(0);
    function renderVangviengList() {
      vangviengList.innerHTML = "";
      vangviengOptions.forEach((opt, idx) => {
        const row = document.createElement("div");
        row.className = "option-row" + (vangviengChecked[idx] ? " selected" : "");
        row.style.cursor = "pointer";
        row.style.position = "relative";
        row.onclick = function(){
          vangviengChecked[idx] = !vangviengChecked[idx];
          vangviengPersons[idx] = vangviengChecked[idx] ? personCount : 0;
          renderVangviengList();
          updateTotal();
        };
        const title = document.createElement("div");
        title.className = "option-title";
        title.innerText = opt.name;
        row.appendChild(title);
        const unit = document.createElement("div");
        unit.className = "option-unit";
        unit.style.display = "flex";
        unit.style.alignItems = "center";
        unit.style.justifyContent = "flex-end";
        unit.style.fontWeight = "bold";
        unit.style.fontSize = "1.07em";
        unit.style.gap = "8px";
        if(vangviengChecked[idx]) {
          unit.innerHTML = `<span>$${opt.price} × ${vangviengPersons[idx]}명 = $${vangviengPersons[idx]*opt.price} / ${vangviengPersons[idx]}명</span>`;
          const minusBtn = document.createElement("button");
          minusBtn.type = "button";
          minusBtn.className = "option-minus-btn";
          minusBtn.innerText = "-1명";
          minusBtn.onclick = function(e){
            vangviengPersons[idx] = Math.max(0, vangviengPersons[idx]-1);
            if(vangviengPersons[idx]===0) {
              vangviengChecked[idx]=false;
            }
            renderVangviengList();
            updateTotal();
            e.stopPropagation();
          };
          unit.appendChild(minusBtn);
        } else {
          unit.innerHTML = `<span>$${opt.price}/인당</span>`;
        }
        row.appendChild(unit);
        vangviengList.appendChild(row);
      });
    }
    window.resetVangvieng = function(){
      vangviengChecked = vangviengChecked.map(()=>false);
      vangviengPersons = vangviengPersons.map(()=>0);
      renderVangviengList();
      updateTotal();
    }
    const careList = document.getElementById("careList");
    let careChecked = Array(careOptions.length).fill(false);
    let carePersons = Array(careOptions.length).fill(0);
    function renderCareList() {
      careList.innerHTML = "";
      careOptions.forEach((opt, idx) => {
        const row = document.createElement("div");
        row.className = "option-row" + (careChecked[idx] ? " selected" : "");
        row.style.cursor = "pointer";
        row.style.position = "relative";
        row.onclick = function(){
          careChecked[idx] = !careChecked[idx];
          carePersons[idx] = careChecked[idx] ? personCount : 0;
          renderCareList();
          updateTotal();
        };
        const title = document.createElement("div");
        title.className = "option-title";
        title.innerText = opt.name;
        row.appendChild(title);
        const unit = document.createElement("div");
        unit.className = "option-unit";
        unit.style.display = "flex";
        unit.style.alignItems = "center";
        unit.style.justifyContent = "flex-end";
        unit.style.fontWeight = "bold";
        unit.style.fontSize = "1.07em";
        unit.style.gap = "8px";
        if(careChecked[idx]) {
          unit.innerHTML = `<span>$${opt.price} × ${carePersons[idx]}명 = $${carePersons[idx]*opt.price} / ${carePersons[idx]}명</span>`;
          const minusBtn = document.createElement("button");
          minusBtn.type = "button";
          minusBtn.className = "option-minus-btn";
          minusBtn.innerText = "-1명";
          minusBtn.onclick = function(e){
            carePersons[idx] = Math.max(0, carePersons[idx]-1);
            if(carePersons[idx]===0) {
              careChecked[idx]=false;
            }
            renderCareList();
            updateTotal();
            e.stopPropagation();
          };
          unit.appendChild(minusBtn);
        } else {
          unit.innerHTML = `<span>$${opt.price}/인당</span>`;
        }
        row.appendChild(unit);
        careList.appendChild(row);
      });
    }
    window.resetCare = function(){
      careChecked = careChecked.map(()=>false);
      carePersons = carePersons.map(()=>0);
      renderCareList();
      updateTotal();
    }
    const roomList = document.getElementById("roomList");
    let selectedRoomIdx = null;
    let singleRoomAdd = 0;
    function updateRoomList(){
      roomList.innerHTML = "";
      let baseRoomCnt = Math.ceil(personCount/2);
      let totalRooms = baseRoomCnt + singleRoomAdd;
      roomOptions.forEach((opt, idx) => {
        const row = document.createElement("div");
        row.className = "option-row" + (selectedRoomIdx === idx ? " selected" : "");
        row.style.cursor = "pointer";
        row.onclick = function(){
          if(selectedRoomIdx === idx){
            selectedRoomIdx = null;
          } else {
            selectedRoomIdx = idx;
          }
          updateRoomList();
          updateTotal();
        };
        const title = document.createElement("div");
        title.className = "option-title";
        title.innerText = opt.name;
        row.appendChild(title);
        const unit = document.createElement("div");
        unit.className = "option-unit";
        unit.style.display = "flex";
        unit.style.alignItems = "center";
        unit.style.justifyContent = "flex-end";
        unit.style.fontWeight = "bold";
        unit.style.fontSize = "1.07em";
        unit.style.gap = "8px";
        if(selectedRoomIdx === idx) {
          if(opt.price === 0) {
            unit.innerHTML = `<span>0원</span>`;
          } else {
            unit.innerHTML = `<span>${opt.price.toLocaleString()}원 / ${totalRooms}방</span>`;
            const minusBtn = document.createElement("button");
            minusBtn.type = "button";
            minusBtn.className = "option-minus-btn";
            minusBtn.innerHTML = `<span>-1방</span>`;
            minusBtn.onclick = function(e){
              if(singleRoomAdd > 0) singleRoomAdd--;
              updateRoomList();
              updateTotal();
              e.stopPropagation();
            };
            unit.appendChild(minusBtn);
          }
        } else {
          if(opt.price === 0){
            unit.innerHTML = `<span>0원</span>`;
          } else {
            unit.innerHTML = `<span>${opt.price.toLocaleString()}원/방</span>`;
          }
        }
        row.appendChild(unit);
        roomList.appendChild(row);
      });
    }
    window.addSingleRoom = function(){
      singleRoomAdd += 1;
      updateRoomList();
      updateTotal();
    }
    window.resetSingleRoom = function(){
      singleRoomAdd = 0;
      selectedRoomIdx = null;
      updateRoomList();
      updateTotal();
    }
    function updateTotal(){
      let contract = personCount * 60000;
      let baseRoomCnt = Math.ceil(personCount/2);
      let totalRooms = baseRoomCnt + singleRoomAdd;
      let roomPrice = (selectedRoomIdx !== null) ? roomOptions[selectedRoomIdx].price : 0;
      if(selectedRoomIdx !== null && roomPrice>0) contract += totalRooms*roomPrice;
      let usd = 0;
      if(guideType==="kr") usd += 220;
      vangviengOptions.forEach((opt, idx) => { usd += vangviengPersons[idx]*opt.price; });
      careOptions.forEach((opt, idx) => { usd += carePersons[idx]*opt.price; });
      let extraUsd = extraUsdByPerson[personCount] ? extraUsdByPerson[personCount] * personCount : 0;
      usd += extraUsd;
      document.getElementById("contractPrice").innerText = contract.toLocaleString()+"원";
      document.getElementById("usdPrice").innerText = "$"+usd.toLocaleString();
    }
    renderVangviengList();
    renderCareList();
    updateRoomList();
    updateTotal();
    function submitEstimate() {
      const travelDate = document.getElementById("travelDate").value.trim();
      if(!travelDate) { alert("여행일자를 선택해주세요."); document.getElementById("travelDate").focus(); return;}
      const name = document.getElementById("contactName").value.trim();
      const phone = document.getElementById("contactPhone").value.trim();
      const note = document.getElementById("contactNote").value.trim();
      if(!name) { alert("대표자 성함을 입력해주세요."); document.getElementById("contactName").focus(); return;}
      if(!phone) { alert("연락 가능한 번호 또는 카카오톡 ID를 입력해주세요."); document.getElementById("contactPhone").focus(); return;}
      let persons = personCount + "명";
      let guide = guideType === "kr" ? "한국인 가이드 ($220/팀)" : "현지인 가이드 (추가요금 없음)";
      let vangStr = vangviengOptions.map((opt, i)=> vangviengPersons[i]>0? `${opt.name} (${vangviengPersons[i]}명)`:'').filter(Boolean).join(', ') || '없음';
      let careStr = careOptions.map((opt, i)=> carePersons[i]>0? `${carePersons[i]}명 - ${opt.name}`:'').filter(Boolean).join(', ') || '없음';
      let baseRoomCnt = Math.ceil(personCount/2);
      let totalRooms = baseRoomCnt + singleRoomAdd;
      let roomStr = selectedRoomIdx!==null ? roomOptions[selectedRoomIdx].name : "미선택";
      if(selectedRoomIdx!==null && roomOptions[selectedRoomIdx].price!==0) roomStr += ` (${totalRooms}방)`;
      let contract = document.getElementById("contractPrice").innerText;
      let usd = document.getElementById("usdPrice").innerText;
      emailjs.send('service_e6uns2x', 'template_hhk1zot', {
        travel_date: travelDate,
        name: name,
        phone: phone,
        persons: persons,
        guide: guide,
        vangvieng: vangStr,
        care: careStr,
        room: roomStr,
        contract: contract,
        usd: usd,
        note: note
      }).then(function(response) {
        alert("견적이 성공적으로 전송되었습니다!");
      }, function(error) {
        alert("견적 전송에 실패했습니다. 잠시 후 다시 시도해주세요.");
      });
    }
  </script>
</body>
</html>
